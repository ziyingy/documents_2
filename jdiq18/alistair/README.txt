August 31, 2017

make-ordered-runs.csh:

Sorts runs in a directory into a definitive order, using the
computed/reported similarity score as the definitive key within each
system and topic ombination.

count-rel.awk:

Counts the number of relevant documents in a qrels file, and reports by
topic, eg

    awk -f count-rel.awk qrels.351-400.trec7.adhoc

In the output, col 5 is the number of judged documents, col 8 is the
number judged relevant (1 or greater in the qrel column).

find-depths.awk

For each system run file supplied, determines for each topic the
depth at which the first unjudged document is encountered, and then
reports aggregates (mean and min) over topics.
First input file needs to be the qrel file, eg 

    awk -f find-depths.awk trec07ahc-qrels-351-400.txt \
        trec07ahc-runs-sorted/input.* \
    	| sort -k10,10nr -k13,13nr \
	> trec07ahc-depths-351-400.txt

    awk -f find-depths.awk trec08ahc-qrels-401-450.txt \
        trec08ahc-runs-sorted/input.* \
    	| sort -k10,10nr -k13,13nr \
	> trec08ahc-depths-401-450.txt

    # if you want this one, edit find-depths.awk manually at TREC13 comments
    awk -f find-depths.awk trec13rob-qrels-651-700.txt \
        trec13rob-runs-sorted/input.* \
    	| sort -k10,10nr -k13,13nr \
	> trec13rob-depths-651-700.txt

In the ouput, col 7 is the average depth of the first unjudged
document , eg, 101 of more for pooling to depth 100, col 10 is the
minimum for that system over topics, and col 13 is the length of the
shortest run across topics, to help differentiate between runs that
were only judged shallowly, and runs that were just short for at
least one topic.

Note the three #'ed line that lets trec13 runs be restricted to 651-700,
near the # TREC13 comments

From these files, the trec{07ahc,08ahc,13rob}-deepruns.txt files are
created manually.


make-reduced-qrels.awk

Generates a reduced qrels file give a target depth, a set of run
names to work with, a set, eg

    awk -v poolto=50 -f make-reduced-qrels.awk trec07ahc-deepruns.txt \
    	trec07ahc-runs-sorted/input* trec07ahc-qrels-351-400.txt \
	> trec07ahc-qrels-351-400-r50.txt

Don't forget to edit the last few lines of the output files to
removed the additional summary data.
Note that col2 has been mangled, and has either a run name (single
nominations) or a multiplicity count (multiple nominations) to help
with the l-o-o processing.


make-pool-summary-data.csh

Generates a list of trecids, topics, and pool information from the
reduced depth pooling files


count-multiples.awk

Reads a "doctored in col 2" reduced qrels file as generated by
make-reduced-qrels.awk and counts many multiple votes there are
across binary-power bands, and what the fraction relevant is within
each of those bands, eg

    awk -f count-multiples.awk trec07ahc-qrels-351-400-r50.txt
